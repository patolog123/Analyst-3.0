**Use Case**

**ID:** UC-MEDCODING-01  
**Версия:** 1.0  
**Автор:** Алексей Голицын  
**Дата:** 05.08.2025

**1\. Краткое описание**

Система автоматически преобразует текстовые медицинские данные (жалобы, диагнозы, процедуры), введенные пользователем в Telegram-боте, в соответствующие коды МКБ-10 с помощью LLM DeepSeek. Результат возвращается в формате структурированного списка с указанием точности соответствия.

**2\. Бизнес-контекст**

**Проблема:**

- Врачи тратят до **30% времени** на ручное кодирование медицинских данных.
- Ошибки в кодах МКБ-10 приводят к **отказам в страховых выплатах** (до 15% случаев).

**Решение:**

- Автоматизация процесса через Telegram-бота с точностью **\>90%**.
- Интеграция с DeepSeek LLM для обработки естественного языка.

**3\. Участники**

| **Роль** | **Описание** |
| --- | --- |
| **Врач** | Основной пользователь, вводит медицинские данные |
| **Telegram-бот** | Интерфейс для взаимодействия |
| **DeepSeek LLM** | Обработка запросов и кодирование |
| **База МКБ-10** | RAG-система для поиска кодов |

**4\. Предусловия**

1. Пользователь авторизован в Telegram.
2. Бот активирован и подключен к API DeepSeek.
3. База МКБ-10 загружена в векторное хранилище (ChromaDB).

**5\. Ограничения**

1. Точность зависит от полноты входных данных
2. Время обработки не более 5 секунд
3. Поддерживаются только актуальные версии МКБ-10

**6\. Триггер:** Врач вводит клинические данные и нажимает “Определить коды”

1. **Основной cценарий**

| **Шаг** | **Действие** | **Системный ответ** |
| --- | --- | --- |
| 1   | Врач отправляет боту команду /start | Бот выводит инструкцию: _"Введите жалобы, диагноз и процедуры:"_ |
| 2   | Врач вводит текст: _"Пациент с кашлем, температурой 38.5. Диагноз: внебольничная пневмония. Назначен рентген."_ | Бот отправляет запрос в DeepSeek LLM |
| 3   | Система выделяет сущности:  <br>\- Жалобы: кашель, лихорадка  <br>\- Диагноз: пневмония  <br>\- Процедура: рентген | LLM ищет коды в базе МКБ-10 |
| 4   | DeepSeek возвращает ответ:  <br>\- Основной код: J18.9 (92%)  <br>\- Доп. коды: R50.9 (85%), Z01.7 (88%) | Бот форматирует ответ |
| 5   | Бот выводит результат:  <br>▪ **J18.9** - Пневмония (92%)  <br>▪ **R50.9** - Лихорадка (85%)  <br>▪ **Z01.7** - Рентген (88%) | Сохраняет запрос в лог |

**6\. Альтернативные потоки**

**A1. Нет точного соответствия**

- Если точность всех кодов <70%, бот отвечает:  
    _"Точный код не найден. Ближайшие варианты: \[коды\]. Уточните описание."_

**A2. Неполные данные**

- При отсутствии диагноза:  
    _"Укажите хотя бы один диагноз для кодирования."_

**7\. Постусловия**

1. Коды МКБ-10 сохранены в истории запросов.
2. Врач может скопировать результат или отправить новый запрос.

**8\. Бизнес-метрики**

| **Метрика** | **Целевое значение** |
| --- | --- |
| Время обработки запроса | <5 сек |
| Точность кодирования | ≥90% |
| Снижение трудозатрат врачей | 70% |

**10\. Примеры запросов/ответов**

**Запрос:**  
_"Пациент с острой болью в пояснице, диагноз: люмбаго. Назначена МРТ."_

**Ответ:**


▪ \*\*M54.5\*\* - Люмбаго (94%)

▪ \*\*Z01.6\*\* - МРТ позвоночника (91%)

**11\. Ограничения**

- Только текстовый ввод (не поддерживает голос/изображения).
- Требуется интернет-соединение для работы DeepSeek API.
