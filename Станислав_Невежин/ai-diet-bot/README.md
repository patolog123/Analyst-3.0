# AI Diet Bot 3.0 ๐ค๐ฅ

Telegram ะฑะพั ะดะปั ัะพะทะดะฐะฝะธั ะฟะตััะพะฝะฐะปะธะทะธัะพะฒะฐะฝะฝัั ะฟะปะฐะฝะพะฒ ะฟะธัะฐะฝะธั ะดะปั ัะฟะพัััะผะตะฝะพะฒ ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ AI (DeepSeek).

## ๐ฏ ะะพะทะผะพะถะฝะพััะธ

- ๐ ะกะฑะพั ะฐะฝััะพะฟะพะผะตััะธัะตัะบะธั ะดะฐะฝะฝัั ัะฟะพัััะผะตะฝะฐ
- ๐๏ธโโ๏ธ ะะฝัะตัะฒัั ะพ ััะตะฝะธัะพะฒะพัะฝะพะผ ัะตะถะธะผะต
- ๐ถโโ๏ธ ะะฝะฐะปะธะท ัะธะทะธัะตัะบะพะน ะฐะบัะธะฒะฝะพััะธ
- ๐ง ะะตะฝะตัะฐัะธั ะฟะปะฐะฝะพะฒ ะฟะธัะฐะฝะธั ัะตัะตะท DeepSeek AI
- ๐พ ะกะพััะฐะฝะตะฝะธะต ะธ ะฟัะพัะผะพัั ะฟัะตะดัะดััะธั ะฟะปะฐะฝะพะฒ
- โ ะะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั (ะดะฐัะฐ ัะพัะตะฒะฝะพะฒะฐะฝะธะน, ัะฐะทะฝะธัะฐ ะฒะตัะพะฒ)

## ๐๏ธ ะััะธัะตะบัััะฐ

### ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ
- **Python 3.13+** - ะพัะฝะพะฒะฝะพะน ัะทัะบ ัะฐะทัะฐะฑะพัะบะธ
- **Aiogram 3.x** - ััะตะนะผะฒะพัะบ ะดะปั Telegram ะฑะพัะพะฒ
- **PostgreSQL** - ะฑะฐะทะฐ ะดะฐะฝะฝัั
- **DeepSeek API** - ะณะตะฝะตัะฐัะธั ะบะพะฝัะตะฝัะฐ ัะตัะตะท LLM
- **Aiohttp** - ะฐัะธะฝััะพะฝะฝัะต HTTP ะทะฐะฟัะพัั

### ะกัััะบัััะฐ ะฑะฐะทั ะดะฐะฝะฝัั (v1.7)
```sql
athletes (ัะฟะพัััะผะตะฝั)
โโโ athlete_id (SERIAL PRIMARY KEY)
โโโ telegram_id (BIGINT UNIQUE)
โโโ name (VARCHAR)
โโโ gender (CHAR(1))
โโโ height (DECIMAL)
โโโ current_weight (DECIMAL)
โโโ target_weight_category (DECIMAL)
โโโ competition_date (DATE)
โโโ created_at (TIMESTAMP)

meal_plans (ะฟะปะฐะฝั ะฟะธัะฐะฝะธั - ะพะฑัะตะดะธะฝะตะฝะฝะฐั ัะฐะฑะปะธัะฐ v1.7)
โโโ meal_id (SERIAL PRIMARY KEY)
โโโ athlete_id (FOREIGN KEY)
โโโ meal_type (VARCHAR) -- ะทะฐะฒััะฐะบ/ะพะฑะตะด/ัะถะธะฝ
โโโ calories (INTEGER)
โโโ proteins (DECIMAL)
โโโ fats (DECIMAL)
โโโ carbs (DECIMAL)
โโโ description (TEXT)
โโโ plan_date (DATE)
โโโ created_at (TIMESTAMP)

workouts (ััะตะฝะธัะพะฒะบะธ)
โโโ workout_id (SERIAL PRIMARY KEY)
โโโ athlete_id (FOREIGN KEY)
โโโ sessions_per_week (INTEGER)
โโโ exercises (VARCHAR)
โโโ equipment_weight (DECIMAL)
โโโ reps (INTEGER)
โโโ sets (INTEGER)
โโโ created_at (TIMESTAMP)

activities (ะฐะบัะธะฒะฝะพััั)
โโโ activity_id (SERIAL PRIMARY KEY)
โโโ athlete_id (FOREIGN KEY)
โโโ activity_type (VARCHAR)
โโโ duration_minutes (INTEGER)
โโโ frequency_per_week (INTEGER)
โโโ created_at (TIMESTAMP)
```

## ๐ ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

### 1. ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั
```bash
git clone <repository-url>
cd ai-diet-bot
```

### 2. ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
```bash
pip install -r requirements_aiogram.txt
```

### 3. ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั ะดะปั Amvera
ะะปั ัะฐะทะฒะตัััะฒะฐะฝะธั ะฝะฐ Amvera ะธัะฟะพะปัะทัะนัะต ัะฐะนะป `.env` ะธะท ัะตะฟะพะทะธัะพัะธั. ะ ะฟะฐะฝะตะปะธ ัะฟัะฐะฒะปะตะฝะธั Amvera ัััะฐะฝะพะฒะธัะต:

**ะะฑัะทะฐัะตะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:**
```env
BOT_TOKEN=your_telegram_bot_token
DEEPSEEK_API_KEY=your_deepseek_api_key
DATABASE_PASSWORD=your_postgres_password  # ะะฐัะพะปั ะพั ะฑะฐะทั ะดะฐะฝะฝัั Amvera PostgreSQL
```

**ะะฟัะธะพะฝะฐะปัะฝัะต ะฝะฐัััะพะนะบะธ:**
```env
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO
```

> **ะะฐะถะฝะพ:** URL ะฑะฐะทั ะดะฐะฝะฝัั ัะฐัะดะบะพะดะธัะพะฒะฐะฝ ะฒ ะบะพะฝัะธะณััะฐัะธะธ ะดะปั Amvera. ะะต ะธัะฟะพะปัะทัะนัะต ะปะพะบะฐะปัะฝัะต ะฝะฐัััะพะนะบะธ DB_HOST, DB_PORT, DB_NAME.

### 4. ะะฝะธัะธะฐะปะธะทะฐัะธั ะฑะฐะทั ะดะฐะฝะฝัั
```bash
python init_db.py
```

### 5. ะะฐะฟััะบ ะฑะพัะฐ
```bash
python main_aiogram_v3.py
```

## ๐ Sequence Diagram

ะะพั ัะฐะฑะพัะฐะตั ัะพะณะปะฐัะฝะพ ัะปะตะดัััะตะน ะดะธะฐะณัะฐะผะผะต ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพััะธ:

1. **ะะฝะธัะธะฐะปะธะทะฐัะธั** - ะบะพะผะฐะฝะดะฐ `/start`, ะฟัะพะฒะตัะบะฐ ัััะตััะฒัััะตะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั
2. **ะกะฑะพั ะฟะฐัะฐะผะตััะพะฒ** - ะดะฐัะฐ ัะพัะตะฒะฝะพะฒะฐะฝะธะน, ะฟะพะป, ัะพัั, ัะตะบััะธะน ะธ ัะตะปะตะฒะพะน ะฒะตั
3. **ะะฐะปะธะดะฐัะธั** - ะฟัะพะฒะตัะบะฐ ะดะฐัั (โฅ7 ะดะฝะตะน) ะธ ัะฐะทะฝะธัั ะฒะตัะพะฒ (โค5%)
4. **ะะฝัะตัะฒัั ะพ ััะตะฝะธัะพะฒะบะฐั** - ะฒะพะฟัะพัั ะพ ัะตะถะธะผะต ััะตะฝะธัะพะฒะพะบ
5. **ะะฝัะตัะฒัั ะพะฑ ะฐะบัะธะฒะฝะพััะธ** - ะฒะพะฟัะพัั ะพ ัะธะทะธัะตัะบะพะน ะฐะบัะธะฒะฝะพััะธ
6. **ะะตะฝะตัะฐัะธั ะฟะปะฐะฝะฐ** - ัะพะทะดะฐะฝะธะต ะฟะปะฐะฝะฐ ะฟะธัะฐะฝะธั ัะตัะตะท DeepSeek AI
7. **ะัะพัะผะพัั ะฟะปะฐะฝะฐ** - ะฝะฐะฒะธะณะฐัะธั ะฟะพ ะดะฝัะผ ะฝะตะดะตะปะธ
8. **ะกะพััะฐะฝะตะฝะธะต ะฟะปะฐะฝะฐ** - ะทะฐะฟะธัั ะฒ ะฑะฐะทั ะดะฐะฝะฝัั

## ๐ง ะะพะฝัะธะณััะฐัะธั

ะัะฝะพะฒะฝัะต ะฝะฐัััะพะนะบะธ ะฒ `config.py`:

- `BOT_TOKEN` - ัะพะบะตะฝ Telegram ะฑะพัะฐ
- `DEEPSEEK_API_KEY` - ะบะปัั API DeepSeek
- ะะฐัััะพะนะบะธ ะฑะฐะทั ะดะฐะฝะฝัั PostgreSQL
- ะะฐัะฐะผะตััั LLM (ัะตะผะฟะตัะฐัััะฐ, ะผะฐะบัะธะผะฐะปัะฝะพะต ะบะพะปะธัะตััะฒะพ ัะพะบะตะฝะพะฒ)

## ๐ ะะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั

### ะัะพะฒะตัะบะฐ ะดะฐัั ัะพัะตะฒะฝะพะฒะฐะฝะธะน
```python
def validate_competition_date(competition_date: date) -> bool:
    """ะัะพะฒะตัะธัั ััะพ ะดะพ ัะพัะตะฒะฝะพะฒะฐะฝะธะน โฅ 7 ะดะฝะตะน"""
    return competition_date > date.today() + timedelta(days=6)
```

### ะัะพะฒะตัะบะฐ ัะฐะทะฝะธัั ะฒะตัะพะฒ
```python
def validate_weight_difference(current_weight: float, target_weight: float) -> bool:
    """ะัะพะฒะตัะธัั ัะฐะทะฝะธัั ะฒะตัะพะฒ โค 5%"""
    difference = abs(current_weight - target_weight) / current_weight
    return difference <= 0.05
```

## ๐ค ะะพะผะฐะฝะดั ะฑะพัะฐ

- `/start` - ะฝะฐัะฐัั ัะฐะฑะพัั ั ะฑะพัะพะผ
- ะะปะฐะฒะฝะพะต ะผะตะฝั:
  - ๐ฏ ะกะพะทะดะฐัั ะฟะปะฐะฝ ะฟะธัะฐะฝะธั
  - ๐ ะะพะธ ัะพััะฐะฝะตะฝะฝัะต ะฟะปะฐะฝั
  - โ ะัะผะตะฝะฐ

## ๐ ะัะปะฐะดะบะฐ

ะะบะปััะธัะต debug ัะตะถะธะผ ะฒ `.env`:
```env
DEBUG=true
LOG_LEVEL=DEBUG
```

ะะพะณะธ ะฑัะดัั ัะพะดะตัะถะฐัั ะฟะพะดัะพะฑะฝัั ะธะฝัะพัะผะฐัะธั ะพ ัะฐะฑะพัะต ะฑะพัะฐ ะธ ะทะฐะฟัะพัะฐั ะบ API.

## ๐ ะะธัะตะฝะทะธั

MIT License - ะฟะพะดัะพะฑะฝะพััะธ ะฒ ัะฐะนะปะต LICENSE.

## ๐ค ะะพะดะดะตัะถะบะฐ

ะะปั ะฒะพะฟัะพัะพะฒ ะธ ะฟัะตะดะปะพะถะตะฝะธะน ัะพะทะดะฐะฒะฐะนัะต issue ะฒ ัะตะฟะพะทะธัะพัะธะธ ะธะปะธ ะพะฑัะฐัะฐะนัะตัั ะบ ัะฐะทัะฐะฑะพััะธะบะฐะผ.

---

**ะะตััะธั:** 3.0
**ะะพัะปะตะดะฝะตะต ะพะฑะฝะพะฒะปะตะฝะธะต:** 2025-08-30
**ะกะพะพัะฒะตัััะฒัะตั:** ai_diet_physical_model_v1.7.sql ะธ ai_diet_sequence_diagram.plantuml
