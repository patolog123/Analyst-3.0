## Критерии приемки (AC)
* AC1. Старт и инициализация  
После команды /start создается сессия и отправляется сообщение: «Напишите позицию/сферу»;  
Повторный /start не сбрасывает контекст, а подсказывает следующий шаг.
Пустой ввод или некорректная команда возвращают вежливое сообщение с 2–3 примерами корректного ввода.

* AC2. Получение требований рынка (hh.ru)  
При вводе позиции/сферы агент запрашивает вакансии, агрегирует ключевые навыки и возвращает 5–20 пунктов в виде маркированного списка за ≤ 5 секунд при нормальной сети.  
Если результатов нет или позиция распознана неуверенно, приходит сообщение с просьбой переформулировать и 2–3 примерами корректных формулировок.

* AC3. Предложение загрузить резюме  
После ответа с навыками агент предлагает кнопки «Загрузить резюме: Да/Нет».  
При «Нет» диалог корректно возвращается к уточнению сферы/позиции без потери контекста.

* AC4. Прием резюме (текст/файл)  
Текст резюме принимается без дополнительных подтверждений и уходит в анализ.  
Для неподдерживаемых форматов (не pdf/doc/docx/txt) отправляется понятное сообщение об ошибке с перечнем поддерживаемых.  
При файле больше лимита агент сообщает об ограничении и предлагает отправить текстом или укороченную версию.  

* AC5. Отчет с рекомендациями  
Итоговый ответ содержит:  
Недостающие навыки (3–15 пунктов),  
План на 8 недель (по неделям, конкретные действия),  
Минимум 3 ресурса (курсы/доки/репозитории).  
Длинный ответ автоматически дробится на 1–3 сообщения так, чтобы не обрезать контент, без разрывов слов и битого форматирования.  

* AC6. Повторяемость и история  
В активной сессии агент помнит последнюю позицию и использует ее по умолчанию, если не указана новая.  
История сессии фиксирует ключевые события (позиция, навыки, прием резюме, отчет) и доступна оператору для аудита.  

* AC7. Обработка ошибок и устойчивость  
При недоступности hh.ru или ИИ сервис вежливо сообщает «Сервис временно недоступен, попробуйте позже», сессия не завершается.  
Технические детали не утечкиваются пользователю; внутренняя ошибка логируется, пользователю — нейтральное сообщение.

* AC8. Локализация и формат  
Ответы на русском (по умолчанию); списки навыков — буллетами, план — с заголовками «Неделя 1–2», «Неделя 3–4», ресурсы — с названиями.  
Без ошибок Markdown/HTML: текст корректно рендерится в Telegram, ссылки/выделения не ломаются.  

* AC9. Производительность пользовательских операций  
«Позиция → список навыков» — ≤ 5 секунд при нормальной сети;  
«Анализ резюме до 20k символов → отчет» — ≤ 15 секунд; при задержке выводится промежуточное «Идет обработка…».  

* AC10. Приватность и контроль данных  
Резюме и отчеты не хранятся дольше установленного TTL (например, 14 дней) без согласия; по запросу пользователя — удаление в ≤ 72 часа.  
Внешним сервисам передаются только необходимые поля; токены/секреты не попадают в логи и ответы.  

## Нефункциональные требования (NFR)
* NFR1. Производительность (SLO)    
P50/P95 «позиция → навыки»: P50 ≤ 2 c, P95 ≤ 5 c.  
P50/P95 «анализ резюме до 20k символов»: P50 ≤ 8 c, P95 ≤ 15 c.  
Максимальная длительность одного шага диалога (включая промежуточные сообщения) ≤ 60 c.

* NFR2. Доступность и отказоустойчивость  
Доступность сервиса ≥ 99.5%/месяц.  

* NFR3. Масштабируемость  
Масштабирование горизонтально без изменения API.  
Поддержка ≥ 1 000 одновременных активных диалогов с деградацией P95 не более +20%.  

* NFR4. Безопасность  
Секреты (API-ключи, токены) хранятся в защищенном хранилище, не в коде и не в логах.  
Весь трафик — TLS 1.2+; доступ к административным/служебным маршрутам ограничен RBAC и IP/сетевыми политиками.  

* NFR5. Конфиденциальность и комплаенс  
Данные резюме и личные идентификаторы шифруются «в покое» и «в канале».  


* NFR6. Наблюдаемость  
Логи: бизнес-события (этапы сценария) и тех.логи (с маскированием PII), корреляция по session_id/chat_id.  
Алерты на деградацию SLO и рост 5xx/таймаутов, дашборды по сценариям.

* NFR7. Поддерживаемость  
Полная спецификация OpenAPI (Swagger) в репозитории; автогенерация клиентов/заглушек; примеры запросов/ответов.


* NFR8. UX и доступность  
Сообщения понятные и краткие, без перегруза терминологией; при ошибке — конкретное «что делать дальше».
Автоматическое дробление длинных сообщений под лимиты Telegram; отсутствие «битых» ссылок/разметки.

* NFR9. Версионирование и совместимость  
Версионирование путей: /api/v1/...; breaking changes только в новом мейджоре (/api/v2).  
Обратная совместимость — минимум один минор после выхода новой версии.



