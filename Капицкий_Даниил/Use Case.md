## Заголовок
Получение совета от АИ-Агента на основе личных данных.

## Акторы
•  Основной: Пользователь.

•  Вторичный: АИ-Агент.

## Предусловие
•  Работник авторизован в системе.

•  AI-агент доступен и готов к взаимодействию.

•  В БД агента есть записи с информацией о состоянии (настроение, физическое состояние, сон и т.д.) и/или событиях в жизни (встречи, задачи, проблемы и т.д.).

•  Пользователь согласился с условиями использования АИ-Агента.

## Ограничения
•  Система должна обеспечивать конфиденциальность и безопасность персональных данных пользователя в соответствии с действующим законодательством.
•  Требуется авторизация в Telegram
•  В БД Агента есть хотя бы одна запись о пользователе.

## Триггер
•  Пользователь нажимает кнопку "Получить совет", запускающую процесс получения совета от АИ-Агента.

## Основной сценарий
1. Пользователь: Выбирает период по которому будет получен совет (по умолчанию по всем введеным записям).
2. Система: Анализирует прошлые записи пользователя пользователя (настроение, физическое состояние, события в жизни, история предыдущих советов и т.д.).
3. Система: Формирует персонализированный совет на основе анализа данных (настроение, физ.состояние, события в жизни), психологических тестов и книг заложенных в агента.
4. Система: Представляет совет пользователю в текстовом формате.
5. Пользователь: Читает совет.
6. Пользователь: Задает уточняющие вопросы.
7. Система: Дает ответ пользователю.
8. Пользователь: Оценивает полезность совета (например, ставит лайк/дизлайк или оставляет комментарий).
9. Система: Записывает оценку пользователя для дальнейшего обучения и улучшения АИ-Агента.

## Альтернативный сценарий
•  Сценарий 1: Недостаточно данных для анализа, шаг 2.
  1. Система определяет, что недостаточно данных для формирования совета.
  2. Система уведомляет пользователя о необходимости предоставить больше информации и предлагает дополнить информацию о себе или изменить период анализа,если возможно.
  3. Пользователь заполняет дополнительные данные и повторяет попытку получить совет (возврат к шагу 1 основного сценария).

## Исключительный сценарий
•  Сценарий 1: Во время анализа данных (шаг 2 основного сценария) или формирования совета (шаг 3 основного сценария) возникает ошибка в работе АИ-Агента.
  1. Система отображает сообщение об ошибке и предлагает пользователю повторить попытку позже или обратиться в службу поддержки.
  2. Система автоматически регистрирует информацию об ошибке для последующего анализа и исправления.

•  Сценарий 2: При попытке получить совет система оказывается недоступна (например, из-за технических работ или сбоя).
  1. Система отображает сообщение о недоступности и предлагает пользователю повторить попытку позже.

•  Сценарий 3: Во время формирования совета (шаг 2 основного сценария) система определяет, что сгенерированный совет может быть расценен как небезопасный или вредный для пользователя (например, совет содержит признаки насилия или подстрекательства).
  1. Система блокирует предоставление этого совета и генерирует альтернативный совет или сообщает, что не может предоставить совет в данной ситуации.
  2.  Система автоматически регистрирует инцидент для дальнейшего анализа и улучшения алгоритмов безопасности.

## Постусловия
•  Пользователь получил совет.
