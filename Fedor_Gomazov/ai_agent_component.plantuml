@startuml ComponentDiagram_AI_Agent

title Компонентная диаграмма - ИИ агент с Telegram ботом

' Настройка стилей
skinparam component {
    BackgroundColor #E8F4FD
    BorderColor #2E5A87
    FontSize 12
    FontColor Black
}

skinparam interface {
    BackgroundColor #667EEA
    BorderColor #2E5A87
    FontColor White
    FontSize 10
}

skinparam arrow {
    Color #2E5A87
    FontSize 10
}

' Основные компоненты
package "Frontend" #lightblue {
    component "Telegram Bot" as telegram_bot {
        [Webhook Handler]
        [Message Parser]
    }
}

package "Backend" #lightgreen {
    component "Python Service" as python_service {
        [Request Processor]
        [LLM Integrator]
    }
}

package "External Services" #lightcoral {
    component "LLM API" as llm_api
}

package "Data Layer" #lightyellow {
    database "Database" as db {
        [User Data]
        [Chat History]
    }
}

' Интерфейсы
() "Telegram API" as telegram_api
() "REST API" as rest_api
() "Database Interface" as db_interface

' Связи между компонентами
telegram_bot --> telegram_api : HTTPS
telegram_api --> python_service : JSON
python_service --> llm_api : API Key
python_service --> db : CRUD
db_interface )-- db
python_service --( rest_api

' Аннотации
note top of telegram_bot: Получает сообщения от пользователей\nи передает их в бэкенд
note right of python_service: Обрабатывает запросы,\nинтегрируется с LLM,\nуправляет данными
note left of llm_api: Внешний сервис ИИ\n(например OpenAI API)
note bottom of db: Хранит:\n- Данные пользователей\n- Историю чатов

@enduml