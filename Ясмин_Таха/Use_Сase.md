#### **AI Агент: "BudgetBot" – Телеграм-бот для учета личных финансов**

---
#### 2. User Story  

Шаблон:  
Как, \<роль\>, я хочу \<функцию\>, чтобы \<ценность\>.  

User Story:  

Как пользователь, который хочет контролировать свои финансы я хочу вносить свои доходы и расходы в свободной форме чтобы иметь историю операций, а также получать рекомендации исходя из статистики расходов

---

#### Use Case: Запись новой финансовой транзакции
**Акторы:**  
- Пользователь (человек, управляющий личным бюджетом)
- BudgetBot (Telegram-бот для учета финансов)

**Предусловия:**  
1. Пользователь авторизован в Telegram  
2. Пользователь уже начал диалог с ботом (отправил /start)
3. Бот активен и готов принимать команды

**Ограничения:**  
1. Бот понимает только текстовые команды (не обрабатывает голосовые сообщения).
2. В сообщении пользователя указана сумма и имеется дополнительная информация по ней

**Триггер:** 
Пользователь отправляет боту сообщение в формате:

- "Доход [сумма] [категория]"
- "Расход [сумма] [категория]"
или в свободной форме

**Основной сценарий:**  
1. Система предлагает ввести данные по шаблону (шаблон в самом сообщении)
2. Пользователь отправляет сообщение с данными по шаблону или в свободной форме
3. LLM проверяет наличие нужных данных, проверяет ограничения, извлекает: сумму, категорию, дату (если не указана — сегодня) и выводит сообщение для подтверждения с уточнением категории
4. Пользователь подтверждает операцию
5. Система обновляет баланс пользователя и выводит подтверждение

**Альтернативные сценарии:**  
- Отсутствуют обязательные данные → запрос недостающих данных
- Ошибка сервера → уведомление о временной недоступности

**Постусловия:**  
- Транзакция сохранена в базе данных
- Баланс пользователя обновлен

**Дополнительные пояснения:**
- Подтверждение операции перед сохранением (возможность исправить ошибку).

Категории и автоматическая классификация:
Бот использует LLM для определения категории (еда, транспорт, развлечения и т. д.).
Возможность кастомных категорий (например, /add_category "Подписки").

История и аналитика:
Команда /history выводит последние N операций (с фильтрами по дате/категории).
Команда /stats показывает сводку (например, "В этом месяце вы потратили 30% на еду").
Возможность экспорта в CSV/Google Sheets.

Контекст и уточнения:
Если данные неполные (например, нет категории), бот задает уточняющие вопросы через LLM ("Это была бизнес-поездка или личная?").

Примеры диалога:
Пользователь: "Купил билеты в кино за 2500"
→ Бот: *"Записал: 2500 руб., категория «Развлечения». Верно?" (Да/Нет)*

Пользователь: "/stats за март"
→ Бот: *"В марте вы потратили 45 000 руб.:

Еда: 15 000 (33%)

Транспорт: 10 000 (22%)
..."*

Дополнительные возможности:
Планирование бюджетов (LLM дает рекомендации: "В этом месяце вы тратите на кафе на 20% больше обычного").

---