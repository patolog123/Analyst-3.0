| № | Описание |
|---|----------|
| 1 | Пользователь отправляет команду `/predict TeamA vs TeamB` с указанием команд в Telegram-бот |
| 2 | Telegram-бот передает сообщение через Telegram API с использованием протокола MTProto |
| 3 | Telegram API подтверждает получение сообщения |
| 4 | Бот отправляет вебхук-запрос по HTTPS на backend (AI Agent Python) |
| 5 | Backend парсит названия команд из полученного сообщения |
| 6 | Backend отправляет HTTPS REST-запрос к OpenDota API для получения статистики команд |
| 7 | OpenDota API возвращает статистику (win rates, историю встреч) |
| 8 | Backend запрашивает актуальные мета-данные из RAG Knowledge Base через HTTPS REST |
| 9 | RAG Knowledge Base возвращает данные о текущих патчах и мете |
| 10 | Backend вычисляет вероятность победы каждой команды на основе полученных данных |
| 11 | Backend отправляет данные LLM Core для генерации текстового обоснования через HTTPS REST |
| 12 | LLM Core возвращает текстовое объяснение прогноза |
| 13 | Backend сохраняет результаты прогноза в PostgreSQL через SQL-запрос |
| 14 | PostgreSQL подтверждает успешное сохранение данных |
| 15 | Backend отправляет ответ обратно в Telegram через Bot API по HTTPS |
| 16 | Telegram API доставляет сообщение боту |
| 17 | Бот отправляет финальный результат прогноза пользователю |
