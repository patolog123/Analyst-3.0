# Use Case: «Получить персональные рекомендации книг» (Telegram‑бот *AI‑Book*)

## Авторы
- **Читатель‑пользователь** (основной автор)  
- **Telegram‑бот *AI‑Book***  
- **Сервис рекомендаций / ML‑модуль**  
- **Каталог книг / медиа‑хранилище**

## Предусловия
1. Пользователь запустил бота `/start` и авторизован.  
2. В профиле уже есть хотя бы один источник предпочтений:  
   - оценки или «лайки» книг;  
   - сохранённые жанры / авторы;  

## Постусловия
1. Пользователь получил 1–5 рекомендованных книг.  
2. По каждой книге доступны обложка, аннотация, краткое «почему советуем», кнопки действий.  
3. Реакции пользователя (лайк, скрыть, купить) сохранены и улучшают модель вкусов.

## Ограничения
1. Максимум 5 рекомендаций за один запрос.   
2. Персонализация не учитывает книги, отсутствующие в основном каталоге.

## Триггер
Пользователь хочет подобрать новую книгу «по настроению» и отправляет команду `/recommend`  
или нажимает кнопку **«Рекомендовать книги»**.

## Основной сценарий
1. Пользователь вызывает `/recommend`.  
2. Бот извлекает профиль чтения: жанры, авторы, оценки, время чтения.  
3. Бот делает запрос к сервису рекомендаций: `POST /rec?user_id=…&k=5`.  
4. Сервис возвращает до 5 книг с пояснением «почему советуем».  
5. Бот отправляет каруселью карточки:  
   - обложка, название, автор;  
   - жанр / язык + «почему»;  
6. Пользователь нажимает кнопку. Бот логирует событие, передаёт в аналитику и, если есть, показывает следующую книгу.  
7. После последней карточки бот спрашивает: «Нужна ещё подборка? `/shelf` — посмотреть полку».

## Альтернативные сценарии
### 1. Холодный старт
Отсутствуют данные вкуса → бот предлагает пройти 5‑вопросный **Genre Quiz** и возвращается к шагу 3.

### 2. Недостаточно релевантных книг
Сервис вернул < 3 книг → бот сообщает, сколько нашлось, и предлагает «Попробовать популярные новинки?».

### 3. Персонализация отключена
Пользователь отключил персональные данные → бот показывает редакторскую подборку бестселлеров.

## Исключительные сценарии
### 1. Ошибка профиля
Бот: «Не удалось загрузить ваши предпочтения. Повторите позже или пройдите /quiz».

### 2. Сбой сервиса рекомендаций
Бот: «Ошибка при формировании списка. Попробуйте позже.»

## Критерии успеха
1. Пользователь получает минимум одну книгу, удовлетворяющую его вкусам.  
2. Каждая рекомендация содержит нужные данные (обложка, аннотация, объяснение, кнопки).  
3. Пользователь может сохранить, купить или скрыть книгу; данные учитываются в будущих подборках.
