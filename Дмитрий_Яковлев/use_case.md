# Use Case: –ü–æ–∏—Å–∫ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Å–±–æ—è Kafka-–∫–ª–∞—Å—Ç–µ—Ä–∞  
## 1. **–ê–∫—Ç–æ—Ä—ã**  
- **–û—Å–Ω–æ–≤–Ω–æ–π**: DevOps-–∏–Ω–∂–µ–Ω–µ—Ä (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)  
- **–°–∏—Å—Ç–µ–º–∞**: RAG-–∞–≥–µ–Ω—Ç (Knowledge Management Agent)  
- **–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ**: –ë–∞–∑—ã –∑–Ω–∞–Ω–∏–π (Confluence, GitLab, Jira), –í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î (Pinecone)  

## 2. **–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è**  
- –ê–≥–µ–Ω—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏:  
  - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: Confluence (300+ —Å—Ç—Ä–∞–Ω–∏—Ü), Runbooks –≤ GitLab  
  - –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã: Jira (500+ –∑–∞–¥–∞—á —Å —Ç–µ–≥–æ–º "Kafka")  
  - –ß–∞—Ç—ã: Slack-–∫–∞–Ω–∞–ª—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤)  
- –î–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã: —á–∞–Ω–∫–∏–Ω–≥, –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ text-embedding-3-large  

## 3. **–û—Å–Ω–æ–≤–Ω–æ–π –ü–æ—Ç–æ–∫**  
1. **–ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**:  
   - –ò–Ω–∂–µ–Ω–µ—Ä –≤–≤–æ–¥–∏—Ç –≤ —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Slack:  
     `"–ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É 'NotEnoughReplicasAfterAppend' –≤ Kafka?"`  
2. **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫**:  
   - –ê–≥–µ–Ω—Ç –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ –≤–µ–∫—Ç–æ—Ä–Ω—ã–π —ç–º–±–µ–¥–¥–∏–Ω–≥  
   - –ò—â–µ—Ç –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î (Pinecone) —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã:  
     - Runbook –∏–∑ GitLab: "Kafka_Replication_Troubleshooting.md"  
     - –û—Ç—á–µ—Ç –æ–± –∏–Ω—Ü–∏–¥–µ–Ω—Ç–µ Jira: PROD-3421 (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞)  
     - –î–∏–∞–ª–æ–≥ –∏–∑ Slack —Å —Ä–µ—à–µ–Ω–∏–µ–º –æ—Ç senior-–∏–Ω–∂–µ–Ω–µ—Ä–∞ (05.03.2025)  
3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞**:  
   - LLM (GPT-4 Turbo) —Å–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–æ–ø-3 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:  
     ```markdown
     **–†–µ—à–µ–Ω–∏–µ –¥–ª—è 'NotEnoughReplicasAfterAppend':**
     1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–¥–æ—Ä–æ–≤—å–µ –±—Ä–æ–∫–µ—Ä–æ–≤:**  
        `kubectl exec -it kafka-toolbox -- kafka-broker-api-versions --bootstrap-server kafka-prod:9092`
     2. **–£–≤–µ–ª–∏—á—å—Ç–µ min.insync.replicas:**  
        ```bash
        kafka-configs --alter --entity-type brokers --entity-name 0 \
        --add-config min.insync.replicas=2
        ```
     3. **–ü–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏:**  
        –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `kafka-reassign-partitions.sh` (–ø—Ä–∏–º–µ—Ä [–∑–¥–µ—Å—å](runbook-link))  
     *–ò—Å—Ç–æ—á–Ω–∏–∫–∏: Jira-PROD-3421, Slack#kafka-support (05.03), Runbook v4.1* 
     ```  
4. **–ö–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è**:  
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Ç–æ—á–Ω—è–µ—Ç: `"–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —ç—Ç–æ –¥–ª—è Kubernetes?"`  
   - –ê–≥–µ–Ω—Ç –¥–æ–ø–æ–ª–Ω—è–µ—Ç –æ—Ç–≤–µ—Ç:  
     ```markdown
     **–î–ª—è K8s:**  
     - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `kubectl exec` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –±—Ä–æ–∫–µ—Ä–∞–º  
     - –ö–æ–Ω—Ñ–∏–≥ —á–µ—Ä–µ–∑ ConfigMap:  
       ```yaml
       data:
         min.insync.replicas: "2"
       ```  
     ```  

## 4. **–ü–æ—Å—Ç—É—Å–ª–æ–≤–∏—è**  
- –ò–Ω—Ü–∏–¥–µ–Ω—Ç —Ä–µ—à–µ–Ω –∑–∞ 12 –º–∏–Ω—É—Ç (–≤–º–µ—Å—Ç–æ 60+ –º–∏–Ω –ø—Ä–∏ —Ä—É—á–Ω–æ–º –ø–æ–∏—Å–∫–µ)  
- –û—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –∫—ç—à–µ –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤  
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ü–µ–Ω–∏–ª –æ—Ç–≤–µ—Ç üëç (—Ñ–∏–¥–±–µ–∫ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –º–æ–¥–µ–ª–∏)  

---

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ü–æ—Ç–æ–∫–∏  
## **–°—Ü–µ–Ω–∞—Ä–∏–π A: –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –±–∞–∑–∞—Ö –∑–Ω–∞–Ω–∏–π**  
- –ê–≥–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç:  
  `"–†–µ—à–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –†–µ–∫–æ–º–µ–Ω–¥—É—é:  
  1) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∫–æ–º–∞–Ω–¥–æ–π 'kafka-console-consumer --topic __consumer_offsets'  
  2) –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—à–∞–±–ª–æ–Ω: [—Å—Å—ã–ª–∫–∞])"`  

## **–°—Ü–µ–Ω–∞—Ä–∏–π B: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**  
- –ü—Ä–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–∏ –º–µ–∂–¥—É runbook –∏ Slack (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ç–∞–π–º–∞—É—Ç–æ–≤):  
  ```markdown
  **–í–Ω–∏–º–∞–Ω–∏–µ! –†–∞–∑–Ω–æ–≥–ª–∞—Å–∏—è –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö:**  
  - Runbook: `request.timeout.ms=30000`  
  - Slack (–æ—Ç @lead-dev): `request.timeout.ms=60000`  
  *–†–µ–∫–æ–º–µ–Ω–¥—É—é: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 60s –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞, –ø—Ä–æ–≤–µ—Å—Ç–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ*  
  ```  

---

# Use Case: –û–±—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞  
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–æ–≤—ã–π –∏–Ω–∂–µ–Ω–µ—Ä –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–æ—Ü–µ–¥—É—Ä—É —Ä–æ—Ç–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤  
**–î–µ–π—Å—Ç–≤–∏–µ –∞–≥–µ–Ω—Ç–∞**:  
1. –ó–∞–ø—Ä–æ—Å: `"–ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å TLS-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ Istio –±–µ–∑ downtime?"`  
2. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:  
   - –ü–æ—à–∞–≥–æ–≤—ã–π runbook  
   - –í–∏–¥–µ–æ–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –∏–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π  
   - –°—Å—ã–ª–∫—É –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–π —Å—Ç–µ–Ω–¥  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É –∑–∞ 1 —á–∞—Å –≤–º–µ—Å—Ç–æ 1 –¥–Ω—è  
