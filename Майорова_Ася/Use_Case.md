# Use Case: Определение эмоционального окраса диалогов

## Название

UC-001. Анализ эмоционального окраса аудиозаписей диалогов между менеджером и клиентом

## User Story

Как руководитель отдела продаж,  
я хочу загрузить в сервис аудиозаписи диалогов между менеджером и клиентом и получить от AI-агента эмоциональный окрас диалога (положительный, отрицательный, нейтральный),  
чтобы своевременно выявлять диалоги, когда тональность клиента указывает на раздражение или явный негатив.

## Участники

| Роль                        | Описание                                                                 | Тип               |
|-----------------------------|--------------------------------------------------------------------------|-------------------|
| Руководитель отдела продаж  | Загружает аудиозаписи, инициирует анализ, получает результаты            | Основной актор    |
| Веб-интерфейс               | Обеспечивает взаимодействие пользователя с системой                      | Вторичный актор   |
| API STT                     | Преобразует аудиозаписи в текст                                          | Вторичный актор   |
| API LLM OpenAI              | Анализирует текст диалога, определяет эмоциональный окрас                | Вторичный актор   |
| RAG-система                 | Хранит примеры диалогов с метками, предоставляет схожие кейсы для сравнения | Вторичный актор   |


## Предусловия 

- Сервис доступен для загрузки аудиозаписей  
- Аудиозаписи в формате .mp3 готовы к загрузке

## Ограничения

- Поддерживается только формат аудиофайлов .mp3  
- Длительность диалога да 30 минут
- Анализ выполняется только для корректно загруженных аудиозаписей

## Триггер

Пользователь загружает аудиозапись диалога в сервис и нажимает кнопку "Анализировать".

## Основной сценарий 

1. Система отображает экран загрузки аудиофайла
2. Руководитель выбирает аудиофайл в формате .mp3 и загружает его.  
3. Система отправляет аудиозапись в API STT и получает текстовую расшифровку диалога 
4. Система отправляет расшифровку в LLM и получает эмоциональный окрас диалога.
5. Система отображает экран с результатом в текстовом и визуальном формате.

## Исключительный сценарий

- 2а. Ошибка при загрузке файла: система отображает сообщение об ошибке и предлагает загрузить файл еще раз
- 3а. API STT вернул ошибку: система выводит сообщение "Сервис временно недоступен, попробуйте позже"
- 4а. API LLM вернул ошибку: система выводит сообщение "Сервис временно недоступен, попробуйте позже"

## Постусловия

- Результат анализа эмоционального окраса диалога сохранен в системе.  
- Руководитель получил результат анализа диалога.  
- Система готова к загрузке и анализу следующих аудиозаписей.
