@startuml

autonumber

actor User
participant frontend
participant backend
participant LLM
database DB

activate User
User->frontend: Отправил сообщение
activate frontend

frontend->backend: http-запрос
activate backend

backend->backend: Добавление системного промта

backend->LLM: Запрос на подготовку SQL-запроса
activate LLM

LLM-->backend: Возврат SQL-запроса
deactivate LLM

backend->DB: SQL-запрос на получение данных
activate DB

DB-->backend: Возврат набора данных
deactivate DB

backend->LLM: Подготовка ответа с данными из БД
activate LLM

LLM-->backend: Возврат ответа с данными из БД
deactivate LLM

backend-->frontend: Передача ответа с данным
deactivate backend

frontend-->User: Отображает ответ
deactivate frontend

@enduml
