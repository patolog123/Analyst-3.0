# Критерии приемки для проекта HairCare AI агент

## Общие критерии
- [ ] Пользователь может отправить текст состава средства для волос в Telegram-бот.
- [ ] Текст состава должен быть длиной не более 4000 символов.
- [ ] Если текст слишком короткий или содержит менее 2 ингредиентов, бот запрашивает уточнение.
- [ ] При успешной отправке текста бот возвращает анализ состава с категориями и эффектами ингредиентов.
- [ ] Анализ включает распознанные ингредиенты, их категории, эффекты и список неизвестных компонентов.
- [ ] Если часть компонентов не найдена в каталоге, бот уведомляет пользователя о частичном результате.
- [ ] В случае ошибки парсинга бот информирует пользователя о невозможности распознать состав.
- [ ] Время обработки запроса не превышает 60 секунд.
- [ ] При превышении времени ожидания бот уведомляет пользователя о таймауте и предлагает повторить запрос позже.
- [ ] Все данные анализа сохраняются в базе данных с привязкой к пользователю (user_telegram_id).
- [ ] Для каждого анализа сохраняется исходный текст, промежуточный результат парсинга и финальный результат.
- [ ] Для каждого ингредиента сохраняется позиция в тексте, совпавшее имя и уровень уверенности.

## Технические критерии
- [ ] API принимает POST запросы с текстом состава по endpoint `/analyze/text`.
- [ ] Валидация входных данных проверяет длину и минимальное количество ингредиентов.
- [ ] Результат анализа возвращается в формате JSON с четкой структурой.
- [ ] Все ошибки обрабатываются и возвращаются с понятными сообщениями.
- [ ] Логирование всех запросов и ошибок для последующего аудита.

# Нефункциональные требования для проекта HairCare AI агент

## NFR-PERF-001: Производительность обработки запросов
Описание: Система должна обеспечивать быстрый отклик на запросы анализа состава.
Критерии измерения:
- Время отклика API: не более 60 секунд (99-й перцентиль)
- Максимальная длина текста: 4000 символов
- Обработка не менее 100 запросов в час
Условия измерения:
- Среда: сервер с 4 CPU, 8 GB RAM
- Нагрузка: до 100 одновременных пользователей
Инструменты: Apache JMeter, Prometheus
Приоритет: Высокий
Обоснование: Быстрая обработка повышает удовлетворенность пользователей

## NFR-SEC-001: Безопасность данных пользователей
Описание: Система должна обеспечивать защиту персональных данных пользователей.
Критерии измерения:
- Хранение user_telegram_id и данных анализа в зашифрованном виде
- Доступ к данным только авторизованным сервисам
- Использование HTTPS для всех внешних API вызовов
- Логирование доступа и изменений данных
Условия тестирования:
- Инструменты: OWASP ZAP, аудит безопасности
Приоритет: Критический
Обоснование: Защита персональных данных обязательна по законодательству

## NFR-REL-001: Надежность и отказоустойчивость
Описание: Система должна обеспечивать высокую доступность и устойчивость к сбоям.
Критерии измерения:
- Доступность сервиса не менее 99.9% в месяц
- Время восстановления после сбоя не более 15 минут
- Обработка ошибок с информированием пользователя
Условия тестирования:
- Мониторинг uptime, тесты отказоустойчивости
Приоритет: Критический
Обоснование: Стабильная работа важна для доверия пользователей

## NFR-SCAL-001: Масштабируемость
Описание: Система должна масштабироваться для поддержки роста числа пользователей.
Критерии измерения:
- Горизонтальное масштабирование backend сервисов
- Автоматическое добавление ресурсов при нагрузке CPU > 70%
- Балансировка нагрузки с отклонением не более 10%
Условия тестирования:
- Нагрузочное тестирование с постепенным увеличением пользователей
Приоритет: Средний
Обоснование: Поддержка роста аудитории без деградации качества

## NFR-USAB-001: Удобство использования
Описание: Взаимодействие с ботом должно быть интуитивным и понятным.
Критерии измерения:
- Время отклика бота на сообщения не более 5 секунд (за исключением анализа)
- Понятные сообщения об ошибках и подсказки
- Поддержка основных сценариев без сбоев
Условия тестирования:
- Тестирование с реальными пользователями
Приоритет: Высокий
Обоснование: Удобство повышает вовлеченность и лояльность

## NFR-COMP-001: Совместимость и интеграция
Описание: Система должна корректно работать с Telegram API и внешними сервисами.
Критерии измерения:
- Поддержка актуальной версии Telegram Bot API
- Корректная обработка всех типов сообщений, кроме фото (текст только)
- Логирование и обработка ошибок интеграции
Условия тестирования:
- Тестирование интеграции с Telegram API
Приоритет: Высокий
Обоснование: Корректная интеграция обеспечивает стабильность работы
